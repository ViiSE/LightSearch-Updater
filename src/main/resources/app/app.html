<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>LightSearch Android</title>
    <link rel="shortcut icon" type="image/x-icon" href="../static/favicon.ico">
</head>
<link href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap" rel="stylesheet">
<style>
    .center {
        display: block;
        margin-left: auto;
        margin-right: auto;
    }
    .cBody {
        position: absolute;
        max-width: 100%;
        padding: 1em;
        height: 40em;
        top:0;
        bottom: 0;
        left: 0;
        right: 0;
        margin: auto;
        background-color: #007dff;
        animation: fadeIn ease 1500ms;
        -webkit-animation: fadeIn ease 1500ms;
        -moz-animation: fadeIn ease 1500ms;
        -o-animation: fadeIn ease 1500ms;
    }
    @keyframes fadeIn{
        0% {
            opacity:0;
        }
        100% {
            opacity:1;
        }
    }
    .cText {
        font-family: 'Open Sans', serif;
        color: white;
        text-align: center;
        font-size: 60pt;
    }
    button, center {
        background-color: white;
        font-family: 'Open Sans', serif;
        font-size: 16pt;
        color: #007dff;
        text-align: center;
        padding-top: 10px;
        padding-bottom: 10px;
        padding-left: 30px;
        padding-right: 30px;
        border: none;
        border-radius: 10px;
        -moz-border-radius: 10px;
        -webkit-border-radius: 10px;
        box-shadow: 0 3px 3px 1px rgba(0, 0, 0, 0.28);
        transition: box-shadow 0.1s linear;
        transform: translate3d(0,0,0);
    }

    button:hover {
        box-shadow: 0 4px 4px 2px rgba(0, 0, 0, 0.32);
    }

    button:disabled,
    button[disabled]{
        background-color: #77B9FF;
        color: white;
    }

</style>

<body class="cBody">
<img src="img/ls_logo_svg.svg" width="200" height="200" alt="Logo" class="center" >
<div class="cText" style="font-size: 32pt; margin-bottom: 70px;">
    Добро пожаловать в проект LightSearch!
</div>
<div class="cText" style="font-size: 16pt; margin-bottom: 20px">
    Нажмите кнопку снизу, чтобы получить последнюю версию LightSearch Android.
</div>
<button class="center" style="margin-bottom: 60px" onclick="getLatestAppVersion()">
    Получить
</button>

<script crossorigin>
    function getLatestAppVersion() {
        fetch("versions/latest")
            .then((response) => {return response.blob();})
            .then((data) => { console.log(data); saveByteArray("app-release.apk", data) })
    }

    function saveByteArray(reportName, byte) {
        let blob = new Blob([byte], {type: "application/octet-stream"});
        let link = document.createElement('a');
        link.href = window.URL.createObjectURL(blob);
        link.download = reportName;
        link.click();
    }
</script>
</body>
